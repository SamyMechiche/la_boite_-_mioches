{% extends 'base.html.twig' %}

{% block title %}Messages - La Boîte à Mioches{% endblock %}

{% block body %}
<div class="messages-container">
    <div class="messages-header">
        <h1>My Messages</h1>
        <button class="new-message-btn">
            <i class="fas fa-plus"></i> New Message
        </button>
    </div>

    <div class="messages-content">
        <div class="messages-sidebar">
            <div class="messages-filters">
                <button class="filter-btn active">All Messages</button>
                <button class="filter-btn">Unread</button>
                <button class="filter-btn">Important</button>
            </div>
        </div>

        <div class="messages-list">
            {% for i in 1..5 %}
                <div class="message-card {% if i == 1 %}unread{% endif %}">
                    <div class="message-avatar">
                        <img src="{{ asset('img/avatar-placeholder.png') }}" alt="Sender Avatar">
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <h3>John Doe</h3>
                            <span class="message-date">2 hours ago</span>
                        </div>
                        <p class="message-preview">Hello! I wanted to discuss your child's progress in our art class...</p>
                    </div>
                    <div class="message-actions">
                        <button class="action-btn" title="Mark as important">
                            <i class="fas fa-star"></i>
                        </button>
                        <button class="action-btn" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="message-detail">
            <div class="message-detail-header">
                <h2>Art Class Progress</h2>
                <div class="message-meta">
                    <span class="sender">From: John Doe</span>
                    <span class="date">March 15, 2024 - 10:30 AM</span>
                </div>
            </div>
            <div class="message-body">
                <p>Hello!</p>
                <p>I wanted to discuss your child's progress in our art class. They have shown remarkable creativity and enthusiasm in our recent projects. Their attention to detail and color choices have been particularly impressive.</p>
                <p>Would you be available for a brief meeting next week to discuss their development and future projects?</p>
                <p>Best regards,<br>John</p>
            </div>
            <div class="message-actions-detail">
                <button class="reply-btn">
                    <i class="fas fa-reply"></i> Reply
                </button>
                <button class="forward-btn">
                    <i class="fas fa-share"></i> Forward
                </button>
            </div>
        </div>
    </div>
</div>

<!-- New Message Modal -->
<div class="modal" id="newMessageModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>New Message</h2>
            <button class="close-modal" data-action="close-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="newMessageForm" class="modal-body">
            <div class="form-group">
                <label for="recipient">To:</label>
                <select id="recipient" name="recipient" required>
                    <option value="">Select a recipient...</option>
                    <option value="1">John Doe (Teacher)</option>
                    <option value="2">Jane Smith (Administrator)</option>
                    <option value="3">Mike Johnson (Nurse)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="subject">Subject:</label>
                <input type="text" id="subject" name="subject" required>
            </div>
            <div class="form-group">
                <label for="message">Message:</label>
                <textarea id="message" name="message" rows="8" required></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="cancel-btn" data-action="close-modal">Cancel</button>
                <button type="submit" class="send-btn">
                    <i class="fas fa-paper-plane"></i> Send Message
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
